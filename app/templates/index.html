{% from "macros.html" import form_item with context %}

<!DOCTYPE html>

<html lang="en">
<head>
  <meta charset="utf-8">

  <title>Habitica Challenge Creator</title>
  <meta name="description" content="Habitica Challenge Creator">

  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
  <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>

</head>

<body>
  <h1>Habitica Challenge Creator</h1>
  <p>There will be content later</p>
  <form action="" method="post" novalidate>
    {{ form.hidden_tag() }}
    {{ form_item(form.habitica_id, "uuid_input") }}
    {{ form_item(form.habitica_api_key, "uuid_input") }}
    {{ form_item(form.challenge_data, "big_textbox") }}
    <div class="form_submit">{{ form.create_challenge(onclick="showLoading()") }}</div>
  </form>

  <div id="working"><img src="{{ url_for('static', filename='loading.gif') }}" alt="The challenge is being created..."/></div>

  {% if challenge_dict %}
    <h2>Challenge</h2>
    <dl class="challenge">
      {% for key, value in challenge_dict.items()  %}
        <dt>{{ keyÂ }}</dt>
        <dd>{{ value }}</dd>
      {% endfor %}
    </dl>
  {% endif %}

  <script>
    function showLoading(){
      document.getElementById("working").style.display = "block"
    }
  </script>
</body>
</html>
